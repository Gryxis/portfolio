"use strict";(self.webpackChunkportfolio=self.webpackChunkportfolio||[]).push([[926],{4926:(rt,L,d)=>{d.r(L),d.d(L,{SnakeModule:()=>at});var z=d(4412),K=d(3888),V=d(1584),Y=d(5964);let o=(()=>{class n{static{this.colors={snake:{body:"#c29ffa",eye:"#ffffff",tongue:"#dc3545",pupilla:"black"},apple:"#dc3545",lightGridCell:"#d1e7dd",darkGridCell:"#a3cfbb"}}static{this.PIXEL_SIZE=32}static{this.SNAKE_WIDTH=.75}static{this.SIZE=16}static{this.PERIOD=250}}return n})();var w=d(5401),J=d(2291);function P(n){var e=-1,t=null==n?0:n.length;for(this.__data__=new J.A;++e<t;)this.add(n[e])}P.prototype.add=P.prototype.push=function ee(n){return this.__data__.set(n,"__lodash_hash_undefined__"),this},P.prototype.has=function ne(n){return this.__data__.has(n)};const ie=P,re=function ae(n,e){for(var t=-1,a=null==n?0:n.length;++t<a;)if(e(n[t],t,n))return!0;return!1},le=function oe(n,e){return n.has(e)},k=function de(n,e,t,a,i,r){var l=1&t,h=n.length,c=e.length;if(h!=c&&!(l&&c>h))return!1;var f=r.get(n),g=r.get(e);if(f&&g)return f==e&&g==n;var p=-1,u=!0,S=2&t?new ie:void 0;for(r.set(n,e),r.set(e,n);++p<h;){var y=n[p],I=e[p];if(a)var E=l?a(I,y,p,e,n,r):a(y,I,p,n,e,r);if(void 0!==E){if(E)continue;u=!1;break}if(S){if(!re(e,function(m,v){if(!le(S,v)&&(y===m||i(y,m,t,a,r)))return S.push(v)})){u=!1;break}}else if(y!==I&&!i(y,I,t,a,r)){u=!1;break}}return r.delete(n),r.delete(e),u};var T=d(6944),x=d(6509),ue=d(1319);const ge=function fe(n){var e=-1,t=Array(n.size);return n.forEach(function(a,i){t[++e]=[i,a]}),t},ye=function pe(n){var e=-1,t=Array(n.size);return n.forEach(function(a){t[++e]=a}),t};var Z=T.A?T.A.prototype:void 0,b=Z?Z.valueOf:void 0;var M=d(7895),Oe=Object.prototype.hasOwnProperty;var O=d(1350),R=d(3744),B=d(9377),De=d(8885),D="[object Arguments]",X="[object Array]",_="[object Object]",G=Object.prototype.hasOwnProperty;const je=function He(n,e,t,a,i,r){var l=(0,R.A)(n),h=(0,R.A)(e),c=l?X:(0,O.A)(n),f=h?X:(0,O.A)(e),g=(c=c==D?_:c)==_,p=(f=f==D?_:f)==_,u=c==f;if(u&&(0,B.A)(n)){if(!(0,B.A)(e))return!1;l=!0,g=!1}if(u&&!g)return r||(r=new w.A),l||(0,De.A)(n)?k(n,e,t,a,i,r):function Te(n,e,t,a,i,r,l){switch(t){case"[object DataView]":if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(n.byteLength!=e.byteLength||!r(new x.A(n),new x.A(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return(0,ue.A)(+n,+e);case"[object Error]":return n.name==e.name&&n.message==e.message;case"[object RegExp]":case"[object String]":return n==e+"";case"[object Map]":var h=ge;case"[object Set]":if(h||(h=ye),n.size!=e.size&&!(1&a))return!1;var f=l.get(n);if(f)return f==e;a|=2,l.set(n,e);var g=k(h(n),h(e),a,i,r,l);return l.delete(n),g;case"[object Symbol]":if(b)return b.call(n)==b.call(e)}return!1}(n,e,c,t,a,i,r);if(!(1&t)){var S=g&&G.call(n,"__wrapped__"),y=p&&G.call(e,"__wrapped__");if(S||y){var I=S?n.value():n,E=y?e.value():e;return r||(r=new w.A),i(I,E,t,a,r)}}return!!u&&(r||(r=new w.A),function Re(n,e,t,a,i,r){var l=1&t,h=(0,M.A)(n),c=h.length;if(c!=(0,M.A)(e).length&&!l)return!1;for(var p=c;p--;){var u=h[p];if(!(l?u in e:Oe.call(e,u)))return!1}var S=r.get(n),y=r.get(e);if(S&&y)return S==e&&y==n;var I=!0;r.set(n,e),r.set(e,n);for(var E=l;++p<c;){var m=n[u=h[p]],v=e[u];if(a)var W=l?a(v,m,u,e,n,r):a(m,v,u,n,e,r);if(!(void 0===W?m===v||i(m,v,t,a,r):W)){I=!1;break}E||(E="constructor"==u)}if(I&&!E){var C=n.constructor,A=e.constructor;C!=A&&"constructor"in n&&"constructor"in e&&!("function"==typeof C&&C instanceof C&&"function"==typeof A&&A instanceof A)&&(I=!1)}return r.delete(n),r.delete(e),I}(n,e,t,a,i,r))};var H=d(2661);const Fe=function j(n,e,t,a,i){return n===e||(null==n||null==e||!(0,H.A)(n)&&!(0,H.A)(e)?n!=n&&e!=e:je(n,e,t,a,j,i))},F=function Ne(n,e){return Fe(n,e)};class $e{constructor(){this.score=0,this.highScore=0,this.state=new z.t("paused"),this.init()}init(){const e=Math.floor(o.SIZE/2);this.score=0,this.snake={positions:[{x:1,y:e},{x:2,y:e},{x:3,y:e},{x:4,y:e},{x:5,y:e}],directions:[]},this.apple={x:e,y:e},this.loop||(this.loop=function Q(n=0,e=K.E){return n<0&&(n=0),(0,V.O)(n,n,e)}(o.PERIOD).pipe((0,Y.p)(t=>"playing"==this.state.getValue())).subscribe(()=>{this.update()}))}getSnake(){return this.snake}getApple(){return{x:this.apple.x,y:this.apple.y}}destroy(){this.loop?.unsubscribe(),this.state.complete()}resume(){"playing"!=this.state.getValue()&&("gameOver"==this.state.getValue()&&this.init(),this.state.next("playing"))}pause(){"paused"!==this.state.getValue()&&this.state.next("paused")}turn(e){if("paused"==this.state.getValue())return;let t;t=this.snake.directions.length>0?this.snake.directions[this.snake.directions.length-1]:this.getDirectionOfLastStep(),!("right"==t&&"left"==e||"left"==t&&"right"==e||"down"==t&&"up"==e||"up"==t&&"down"==e)&&(this.snake.directions[this.snake.positions.length-1]==e||this.snake.directions.length>2||this.snake.directions.push(e))}update(){const e=this.snake.positions[this.snake.positions.length-1],t={x:e.x,y:e.y};let a=this.getNextDirection();switch(this.snake.directions.shift(),a){case"right":t.x++;break;case"left":t.x--;break;case"up":t.y--;break;case"down":t.y++}t.x<0||t.y<0||t.x>=o.SIZE||t.y>=o.SIZE||this.snake.positions.some(i=>F(i,t))?this.lose():(this.snake.positions.push(t),F(this.apple,t)?this.eatApple():this.snake.positions.shift())}getNextDirection(){return this.snake.directions.length>0?this.snake.directions[0]:this.getDirectionOfLastStep()}getDirectionOfLastStep(){const e=this.snake.positions[this.snake.positions.length-1],t=this.snake.positions[this.snake.positions.length-2];return e.x>t.x?"right":e.x<t.x?"left":e.y>t.y?"down":"up"}lose(){this.highScore=Math.max(this.score,this.highScore),this.state.next("gameOver")}eatApple(){this.score++;const e=new Set;for(let i=0;i<o.SIZE*o.SIZE;i++)e.add(i);this.snake.positions.forEach(i=>{e.delete(i.y*o.SIZE+i.x)});const t=Math.round(Math.random()*e.size-1),a=[...e.values()][t];this.apple.x=a%o.SIZE,this.apple.y=Math.floor(a/o.SIZE)}}class Ue{constructor(e,t){this.layer=e,this.gameLogic=t,this.constructHeart()}draw(){const e=this.gameLogic.getApple();this.layer.save(),this.layer.beginPath(),this.layer.fillStyle=o.colors.apple,this.layer.translate((e.x+.5)*o.PIXEL_SIZE,(e.y+.5)*o.PIXEL_SIZE),this.layer.scale(o.PIXEL_SIZE,o.PIXEL_SIZE),this.layer.fill(this.heartPath),this.layer.restore()}constructHeart(){this.heartPath=new Path2D,this.heartPath.moveTo(0,-.25),this.heartPath.bezierCurveTo(0,-.2734375,-.0390625,-.3671875,-.1953125,-.3671875),this.heartPath.bezierCurveTo(-.4296875,-.3671875,-.4296875,-.07421875,-.4296875,-.07421875),this.heartPath.bezierCurveTo(-.4296875,.0625,-.2734375,.234375,0,.375),this.heartPath.bezierCurveTo(.2734375,.203125,.4296875,.0625,.4296875,-.07421875),this.heartPath.bezierCurveTo(.4296875,-.07421875,.4296875,-.3671875,.1953125,-.3671875),this.heartPath.bezierCurveTo(.078125,-.3671875,0,-.2734375,0,-.25)}}class We{constructor(e){this.layer=e}draw(){this.layer.fillStyle=o.colors.lightGridCell,this.layer.fillRect(0,0,o.PIXEL_SIZE*o.SIZE,o.PIXEL_SIZE*o.SIZE),this.layer.fillStyle=o.colors.darkGridCell;for(let e=0;e<o.SIZE;e+=2)for(let t=0;t<o.SIZE;t+=2)this.layer.fillRect(e*o.PIXEL_SIZE,t*o.PIXEL_SIZE,o.PIXEL_SIZE,o.PIXEL_SIZE);this.layer.fillStyle=o.colors.darkGridCell;for(let e=1;e<o.SIZE;e+=2)for(let t=1;t<o.SIZE;t+=2)this.layer.fillRect(e*o.PIXEL_SIZE,t*o.PIXEL_SIZE,o.PIXEL_SIZE,o.PIXEL_SIZE)}}class ze{constructor(e,t){this.layer=e,this.gameLogic=t}draw(){const e=this.gameLogic.getSnake();this.drawTorso(e),this.drawHead(e),this.drawTail(e)}drawHead(e){const t=e.positions[e.positions.length-1],a=e.positions[e.positions.length-2],i=o.PIXEL_SIZE,r=o.SNAKE_WIDTH,l=this.getCellCenterInPx(t);let h=0;h=t.x>a.x?0:t.x<a.x?Math.PI:t.y>a.y?1*Math.PI/2:-1*Math.PI/2,this.layer.save(),this.layer.translate(l.x,l.y),this.layer.rotate(h),this.layer.beginPath(),this.layer.fillStyle=o.colors.snake.body,this.layer.roundRect(-1*i/2,-1*i/2*r,i,i*r,[0,i/2.25,i/2.25,0]),this.layer.fill(),this.layer.beginPath(),this.layer.fillStyle=o.colors.snake.eye,this.layer.strokeStyle=o.colors.snake.body,this.layer.lineWidth=i/4,this.layer.arc(-1*i/4*r,-1*i/2*r,i/4*r,0,2*Math.PI),this.layer.arc(-1*i/4*r,+i/2*r,i/4*r,0,2*Math.PI),this.layer.stroke(),this.layer.fill(),this.layer.beginPath(),this.layer.fillStyle=o.colors.snake.pupilla,this.layer.arc((-1*i/4+i/12)*r,+i/2*r,i/12*r,0,2*Math.PI),this.layer.arc((-1*i/4+i/12)*r,-1*i/2*r,i/12*r,0,2*Math.PI),this.layer.fill(),this.layer.restore()}getCellCenterInPx(e){return this.posToPx({x:e.x+.5,y:e.y+.5})}posToPx(e){return{x:e.x*o.PIXEL_SIZE,y:e.y*o.PIXEL_SIZE}}drawTail(e){this.layer.save(),this.layer.beginPath(),this.layer.fillStyle=o.colors.snake.body;const t=e.positions[0],a=e.positions[1],i=o.PIXEL_SIZE,r=o.SNAKE_WIDTH,h=this.posToPx({x:t.x+.5+(a.x-t.x)/2.25,y:t.y+.5+(a.y-t.y)/2.25});this.layer.translate(h.x,h.y),t.y!=a.y&&this.layer.rotate(Math.PI/2),this.layer.roundRect(-.5*i,-.5*r*i,i,i*r,i/2.25),this.layer.fill(),this.layer.restore()}drawTorso(e){this.layer.save(),this.layer.beginPath(),this.layer.fillStyle=o.colors.snake.body,e.positions.forEach((t,a)=>{0==a||a==e.positions.length-1||(this.isCornerAt(e,a)?this.addCornerToPath(e,a):this.addStraightToPath(e,a))}),this.layer.fill(),this.layer.restore()}isCornerAt(e,t){const a=e.positions[t-1],i=e.positions[t+1];return 0!=a.x-i.x&&0!=a.y-i.y}addCornerToPath(e,t){const a=o.PIXEL_SIZE,i=o.SNAKE_WIDTH,r=e.positions[t-1],l=e.positions[t],h=e.positions[t+1];let c=new Set([0,1,2,3]);const f=this.getCellCenterInPx(l);(r.x<l.x||h.x<l.x)&&(c.delete(1),c.delete(2)),(r.x>l.x||h.x>l.x)&&(c.delete(0),c.delete(3)),(r.y<l.y||h.y<l.y)&&(c.delete(2),c.delete(3)),(r.y>l.y||h.y>l.y)&&(c.delete(0),c.delete(1));const g=[...c.values()][0];this.layer.save(),this.layer.translate(f.x,f.y),this.layer.rotate(Math.PI*g*.5),this.layer.moveTo(-.5*a,-.5*a),this.layer.arc(-.5*a,-.5*a,(1-.5*(1-i))*a,0,Math.PI/2),this.layer.moveTo(-.5*a,-.5*a),this.layer.arc(-.5*a,-.5*a,.5*(1-i)*a,Math.PI/2,0,!0),this.layer.restore()}addStraightToPath(e,t){const a=o.PIXEL_SIZE,i=o.SNAKE_WIDTH,r=e.positions[t-1],l=e.positions[t],h=this.getCellCenterInPx(l);this.layer.save(),this.layer.translate(h.x,h.y),r.y!=l.y&&this.layer.rotate(Math.PI/2),this.layer.rect(-.5*a,-.5*i*a,a,a*i),this.layer.restore()}}class Ke{constructor(e,t,a){this.foreground=e,this.alive=!0,this.snakeRenderer=new ze(e,a),this.appleRenderer=new Ue(e,a),this.gridRenderer=new We(t)}init(){this.alive=!0,requestAnimationFrame(e=>{this.gridRenderer.draw(),this.drawFrame()})}destroy(){this.alive=!1}drawFrame(){this.alive&&(this.clearForeground(),this.appleRenderer.draw(),this.snakeRenderer.draw(),requestAnimationFrame(()=>this.drawFrame()))}clearForeground(){this.foreground.clearRect(0,0,o.SIZE*o.PIXEL_SIZE,o.SIZE*o.PIXEL_SIZE)}}var s=d(4438),N=d(960),$=d(177);const Ve=["snakeCanvas"],Qe=["backgroundCanvas"],Ye=["pauseModal"],Je=["gameOverModal"],qe=n=>({"padding-left.px":n}),et=(n,e,t)=>({"width.px":n,"height.px":e,"padding.px":t});function tt(n,e){if(1&n){const t=s.RV6();s.j41(0,"div",18)(1,"h4",19),s.EFF(2,"Game paused"),s.k0s(),s.j41(3,"button",20),s.bIt("click",function(){const i=s.eBV(t).$implicit;return s.Njj(i.dismiss("Cross click"))}),s.k0s()(),s.j41(4,"div",21),s.EFF(5," Close Modal or press space to resume. Use Arrow keys to control the snake. Press space to pause game. "),s.k0s()}}function nt(n,e){if(1&n){const t=s.RV6();s.j41(0,"div",18)(1,"h4",19),s.EFF(2,"Game over"),s.k0s(),s.j41(3,"button",20),s.bIt("click",function(){const i=s.eBV(t).$implicit;return s.Njj(i.dismiss("Cross click"))}),s.k0s()(),s.j41(4,"div",21),s.EFF(5," Close Modal or press space to restart. "),s.k0s()}}let st=(()=>{class n{constructor(t){this.ngbModal=t,this.SIZE=o.SIZE,this.PIXEL_SIZE=o.PIXEL_SIZE,this.gameLogic=new $e}ngAfterViewInit(){const t=this.snakeCanvas.nativeElement.getContext("2d"),a=this.backgroundCanvas.nativeElement.getContext("2d");this.renderer=new Ke(t,a,this.gameLogic),this.renderer.init(),this.modalOpener=this.gameLogic.state.subscribe(i=>{let r;"playing"!==i&&("paused"===i?r=this.ngbModal.open(this.pauseModal).result:"gameOver"===i&&(r=this.ngbModal.open(this.gameOverModal).result),r?.finally(()=>this.gameLogic.resume()))})}ngOnDestroy(){this.modalOpener.unsubscribe(),this.renderer.destroy(),this.gameLogic.destroy()}onDirectionChange(t){let a="up";switch(t.key){case"ArrowLeft":a="left";break;case"ArrowRight":a="right";break;case"ArrowUp":a="up";break;case"ArrowDown":a="down"}this.gameLogic.turn(a)}onPause(t){this.ngbModal.dismissAll(),["paused","gameOver"].includes(this.gameLogic.state.getValue())?this.gameLogic.resume():this.gameLogic.pause()}onMoveBtn(t){this.gameLogic.turn(t)}static{this.\u0275fac=function(a){return new(a||n)(s.rXU(N.Bq))}}static{this.\u0275cmp=s.VBU({type:n,selectors:[["app-snake"]],viewQuery:function(a,i){if(1&a&&(s.GBs(Ve,5),s.GBs(Qe,5),s.GBs(Ye,5),s.GBs(Je,5)),2&a){let r;s.mGM(r=s.lsd())&&(i.snakeCanvas=r.first),s.mGM(r=s.lsd())&&(i.backgroundCanvas=r.first),s.mGM(r=s.lsd())&&(i.pauseModal=r.first),s.mGM(r=s.lsd())&&(i.gameOverModal=r.first)}},hostBindings:function(a,i){1&a&&s.bIt("keydown.arrowup",function(l){return i.onDirectionChange(l)},!1,s.tSv)("keydown.arrowdown",function(l){return i.onDirectionChange(l)},!1,s.tSv)("keydown.arrowright",function(l){return i.onDirectionChange(l)},!1,s.tSv)("keydown.arrowleft",function(l){return i.onDirectionChange(l)},!1,s.tSv)("keydown.space",function(l){return i.onPause(l)},!1,s.tSv)},decls:27,vars:14,consts:[["backgroundCanvas",""],["snakeCanvas",""],["pauseModal",""],["gameOverModal",""],[1,"game-container"],[3,"ngStyle"],[2,"margin-right","2rem"],[1,"layer-container",3,"ngStyle"],[1,"layer"],[1,"d-flex","w-100","justify-content-center","flex-column","align-items-center","d-lg-none"],["type","button",1,"btn","btn-secondary","m-1",3,"click"],[1,"icon-arrow-up"],[1,"d-flex"],[1,"icon-arrow-left"],[1,"icon-arrow-down"],[1,"icon-arrow-right"],["type","button",1,"btn","btn-secondary","mt-1",3,"click"],[1,"icon-pause"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"]],template:function(a,i){if(1&a){const r=s.RV6();s.j41(0,"div",4)(1,"h5",5)(2,"span",6),s.EFF(3),s.k0s(),s.j41(4,"span"),s.EFF(5),s.k0s()(),s.j41(6,"div",7),s.nrm(7,"canvas",8,0)(9,"canvas",8,1),s.k0s()(),s.j41(11,"div",9)(12,"button",10),s.bIt("click",function(){return s.eBV(r),s.Njj(i.onMoveBtn("up"))}),s.nrm(13,"span",11),s.k0s(),s.j41(14,"div",12)(15,"button",10),s.bIt("click",function(){return s.eBV(r),s.Njj(i.onMoveBtn("left"))}),s.nrm(16,"span",13),s.k0s(),s.j41(17,"button",10),s.bIt("click",function(){return s.eBV(r),s.Njj(i.onMoveBtn("down"))}),s.nrm(18,"span",14),s.k0s(),s.j41(19,"button",10),s.bIt("click",function(){return s.eBV(r),s.Njj(i.onMoveBtn("right"))}),s.nrm(20,"span",15),s.k0s()(),s.j41(21,"button",16),s.bIt("click",function(h){return s.eBV(r),s.Njj(i.onPause(h))}),s.nrm(22,"span",17),s.k0s()(),s.DNE(23,tt,6,0,"ng-template",null,2,s.C5r)(25,nt,6,0,"ng-template",null,3,s.C5r)}2&a&&(s.R7$(),s.Y8G("ngStyle",s.eq3(8,qe,.625*i.PIXEL_SIZE)),s.R7$(2),s.SpI(" Score: ",i.gameLogic.score," "),s.R7$(2),s.SpI(" Highscore: ",i.gameLogic.highScore," "),s.R7$(),s.Y8G("ngStyle",s.sMw(10,et,i.SIZE*i.PIXEL_SIZE,i.SIZE*i.PIXEL_SIZE,.625*i.PIXEL_SIZE)),s.R7$(),s.BMQ("width",i.SIZE*i.PIXEL_SIZE)("height",i.SIZE*i.PIXEL_SIZE),s.R7$(2),s.BMQ("width",i.SIZE*i.PIXEL_SIZE)("height",i.SIZE*i.PIXEL_SIZE))},dependencies:[$.B3],styles:[".game-container[_ngcontent-%COMP%]{margin:auto;width:-moz-fit-content;width:fit-content}.layer-container[_ngcontent-%COMP%]{position:relative;margin:1rem;box-sizing:content-box;background:repeating-linear-gradient(0deg,#653208 0 64px,#331904 64px 128px)}.layer-container[_ngcontent-%COMP%]   .layer[_ngcontent-%COMP%]{position:absolute;background-color:transparent}"]})}}return n})();var U=d(7513);const it=[{path:"",component:st}];let at=(()=>{class n{static{this.\u0275fac=function(a){return new(a||n)}}static{this.\u0275mod=s.$C({type:n})}static{this.\u0275inj=s.G2t({imports:[$.MD,U.iI.forChild(it),N.XZ,U.iI]})}}return n})()}}]);